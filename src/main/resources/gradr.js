addEventListener("DOMContentLoaded", ()=>{function e(){const e=document.querySelectorAll(".gradr-hl"),t=[...new Set([...e].map((e=>e.dataset.id)))];t.forEach(((e,o)=>{const r=document.querySelector(`.gradr-hl[data-id='${e}']`),d=document.querySelector(`.gradr-comment[data-id='${e}']`);if(!d)return;const n=document.querySelector("html").scrollTop,c=r.getBoundingClientRect().top+n;if(0===o)return void(d.style.top=c+"px");const a=document.querySelector(`.gradr-comment[data-id='${t[o-1]}']`);if(!a)return;const l=a.offsetTop+a.offsetHeight+5;d.style.top=Math.max(c,l)+"px"}))}function t(e,t=!1){const o=document.querySelectorAll(`.gradr-hl[data-id='${e}']`),r=document.querySelector(`.gradr-comment[data-id='${e}']`);t?(o.forEach((e=>e.classList.remove("hovered"))),r?.classList.remove("hovered")):(o.forEach((e=>e.classList.add("hovered"))),r?.classList.add("hovered"))}document.querySelectorAll(".gradr-comment button,.gradr-grade a").forEach((e=>{e.addEventListener("pointerenter",(e=>{const t=document.querySelector("html").scrollTop,o=e.target,r=o.dataset.crit,d=o.getBoundingClientRect().top,n=document.querySelector(`.gradr-crit-tooltip[data-criterion="${r}"]`).cloneNode(!0);n.classList.add("active"),document.body.appendChild(n);const c=n.getBoundingClientRect().height;n.style.top=(d>c+5?d-c-5:d+20)+t+"px"})),e.addEventListener("pointerleave",(()=>{document.querySelector(".gradr-crit-tooltip.active").remove()}))})),document.querySelectorAll(".gradr-hl, .gradr-comment").forEach((e=>{const o=e.dataset.id;e.addEventListener("pointerenter",(()=>t(o))),e.addEventListener("pointerleave",(()=>t(o,!0)))})),e(),window.onresize=e});